# public/admin/config.yml

# Auth0 Authentication
backend:
  name: auth0
  auth0:
    domain: dev-hwru7mq43np63pk4.us.auth0.com
    clientId: yE80EioGexiahYIPNfcQMM9sAn3MKmgp
    scope: rich@lanesbrains.com
    audience: https://i90eats.auth0.com/api/v2/

# Enable local backend for development
local_backend: true

media_folder: "public/images"
public_folder: "/images"

collections:
  # üè™ RESTAURANT OWNER COLLECTIONS
  - name: "my-restaurants"
    label: "My Restaurants"
    folder: "content/restaurants"
    create: false
    filter:
      field: ownerEmail
      value: "{{user.user_metadata.email}}"
    fields:
      - { label: "Name", name: "title", widget: "string" }
      - {
          label: "Slug",
          name: "slug",
          widget: "string",
          required: true,
          pattern:
            [
              "^[a-z0-9]+(?:-[a-z0-9]+)*$",
              "Lowercase letters, numbers, and hyphens only",
            ],
        }
      - {
          label: "Location",
          name: "location",
          widget: "select",
          options:
            [
              "Seattle, WA",
              "Bellevue, WA",
              "Issaquah, WA",
              "Snoqualmie Pass, WA",
              "Cle Elum, WA",
              "Ellensburg, WA",
              "Spokane, WA",
              "Coeur d'Alene, ID",
              "Kellogg, ID",
              "Wallace, ID",
              "Lookout Pass, ID",
              "Missoula, MT",
              "Butte, MT",
              "Bozeman, MT",
              "Livingston, MT",
              "Big Timber, MT",
              "Billings, MT",
              "Sheridan, WY",
              "Rapid City, SD",
              "Wall, SD",
              "Kadoka, SD",
              "Murdo, SD",
              "Chamberlain, SD",
              "Mitchell, SD",
              "Sioux Falls, SD",
              "Luverne, MN",
              "Worthington, MN",
              "Fairmont, MN",
              "Blue Earth, MN",
              "Albert Lea, MN",
              "Austin, MN",
              "Rochester, MN",
              "La Crosse, WI",
              "Des Moines, IA",
              "Newton, IA",
              "Grinnell, IA",
              "Iowa City, IA",
              "Davenport, IA",
              "Rock Island, IL",
              "Moline, IL",
              "Chicago, IL",
              "Hammond, IN",
              "Toledo, OH",
              "Fremont, OH",
              "Elyria, OH",
              "Cleveland, OH",
              "Erie, PA",
              "Buffalo, NY",
              "Batavia, NY",
              "Rochester, NY",
              "Syracuse, NY",
              "Utica, NY",
              "Albany, NY",
              "Springfield, MA",
              "Worcester, MA",
              "Boston, MA",
            ],
        }
      - { label: "Cuisine Type", name: "cuisine", widget: "string" }
      - { label: "Address", name: "address", widget: "text" }
      - { label: "Phone", name: "phone", widget: "string" }
      - { label: "Website", name: "website", widget: "string", required: false }
      - { label: "Description", name: "description", widget: "text" }
      - {
          label: "Featured Image",
          name: "image",
          widget: "image",
          required: false,
          hint: "Recommended size: 800x600 pixels",
        }
      - {
          label: "Premium Listing",
          name: "premium",
          widget: "boolean",
          default: false,
          hint: "Premium restaurants get priority placement and featured badges",
        }
      - {
          label: "Created Date",
          name: "createdAt",
          widget: "datetime",
          format: "YYYY-MM-DD",
          date_format: "YYYY-MM-DD",
          time_format: false,
          default: "{{now}}",
        }
      - {
          label: "Updated Date",
          name: "updatedAt",
          widget: "datetime",
          format: "YYYY-MM-DD",
          date_format: "YYYY-MM-DD",
          time_format: false,
          default: "{{now}}",
        }
      - {
          label: "Owner Email",
          name: "ownerEmail",
          widget: "hidden",
          default: "{{user.user_metadata.email}}",
        }

  # üçΩÔ∏è RESTAURANT DEALS (filtered by ownership)
  - name: "my-deals"
    label: "My Restaurant Deals"
    folder: "content/deals"
    create: true
    filter:
      field: "restaurantSlug"
      value: "{{user.user_metadata.restaurant_slug}}"
    fields:
      - {
          label: "Restaurant Slug",
          name: "restaurantSlug",
          widget: "hidden",
          default: "{{user.user_metadata.restaurant_slug}}",
        }
      - { label: "Deal Title", name: "title", widget: "string" }
      - {
          label: "Deal Description",
          name: "description",
          widget: "markdown",
          hint: "Use markdown to format your deal details",
        }
      - {
          label: "Start Date",
          name: "startDate",
          widget: "datetime",
          format: "YYYY-MM-DD",
        }
      - {
          label: "End Date",
          name: "endDate",
          widget: "datetime",
          format: "YYYY-MM-DD",
        }
      - { label: "Active", name: "active", widget: "boolean", default: true }
      - {
          label: "Premium Deal",
          name: "premium",
          widget: "boolean",
          default: false,
          hint: "Premium deals get priority placement",
        }
      - { label: "Deal Image", name: "image", widget: "image", required: false }
# üîí ADMIN-ONLY COLLECTIONS (hidden from restaurant owners)
# These will only be visible to users with admin role
